title: the application state needs to be refreshed 
details: | 
  The applications state is out of sync, it must be refreshed.
impact: | 
  The application will not work as expected in it's current state.
mitigation:
  when: |
    if [ -f "/tmp/runbooks-cli/state.error" ];
    then 
      echo 1 
    else 
      echo 0 
    fi
  steps:
  - name: export required variables
    shell: 
      command: "APPLICATION_DIRECTORY=/tmp/runbooks-cli"
  - name: remove the directory if it exists
    shell:
      command: rm -rf $APPLICATION_DIRECTORY
      assert: |
        if [ -d "/tmp/runbooks-cli" ];
        then 
          echo "false"
        else 
          echo "true"
        fi
  - name: create the directory
    shell:
      command: mkdir -p $APPLICATION_DIRECTORY
      assert: |
        if [ -d "$APPLICATION_DIRECTORY" ];
        then 
          echo "true"
        else 
          echo "false"
        fi
  - name: add the file
    shell:
      command: echo "state has been refreshed" > $APPLICATION_DIRECTORY/state
