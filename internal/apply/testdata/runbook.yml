title: the application state needs to be refreshed 
details: | 
  The applications state is out of sync, it must be refreshed.
impact: | 
  The application will not work as expected in it's current state.
mitigation:
  when: |
    if [ -f "/tmp/runbooks-cli/state.error" ];
    then 
      echo 1 
    else 
      echo 0 
    fi
  steps:
  - name: export required variables
    shell: "APPLICATION_DIRECTORY=/tmp/runbooks-cli"
  - name: remove the directory if it exists
    shell: rm -rf $APPLICATION_DIRECTORY
  - name: verify the directory has been removed 
    assert: |
      if [ -d "/tmp/runbooks-cli" ];
      then 
        echo "false"
      else 
        echo "true"
      fi
  - name: create the directory
    shell: mkdir -p $APPLICATION_DIRECTORY
  - name: verify the directory has been recreated
    assert: |
      if [ -d "$APPLICATION_DIRECTORY" ];
      then 
        echo "true"
      else 
        echo "false"
      fi
  - name: add the file
    shell: echo "state has been refreshed" > $APPLICATION_DIRECTORY/state
